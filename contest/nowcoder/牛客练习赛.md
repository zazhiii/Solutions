# 牛客练习赛128（待：D E F）

[C-Cidoai的树上方案_牛客练习赛128 (nowcoder.com)](https://ac.nowcoder.com/acm/contest/88880/C)

给定大小为 $n$ 的有标号有根树，以 1 为根，求在树外引出一个点向树内任意连边使得构成的**简单图**不含**三元环**的方案数。答案对 $998244353$ 取模。

> **树型dp**
>
> $dfs(u，0|1)$表示节点$u$及其子节点有多少种选择方法，0|1表示不选|选择$u$节点
>
> 选择当前节点$u$，那么其子节点不能选；不选当前节点$u$那么子节点就可以有选或者不选两种；子节点的选法的累乘即$dfs(u,0|1)$

```java
    static int n, mod = 998244353;
    static long memo[][];
    static List<Integer> adj[];
    public static void solve() throws IOException{     
        n = rd.nextInt();    
        adj = new ArrayList[n + 1];
        Arrays.setAll(adj, i -> new ArrayList<>());
        for(int i = 2; i <= n; i ++){
            int u = rd.nextInt();
            adj[u].add(i);
        }
        memo = new long[n + 1][2];
        for(int i = 1; i <= n; i ++) Arrays.fill(memo[i], -1);
        pw.println((dfs(1, 0) + dfs(1, 1)) % mod);
    }
    public static long dfs(int u, int t){
        if(memo[u][t] != -1) return memo[u][t];
        memo[u][0] = 1;
        memo[u][1] = 1;
        for(int v : adj[u]){
            memo[u][0] = memo[u][0] * (dfs(v, 0) + dfs(v, 1)) % mod;
            memo[u][1] = memo[u][1] * dfs(v, 0) % mod;
        }
        return memo[u][t];
    }
```



# 牛客练习赛129（待：C D E F）
